#!/bin/sh

set -e

BRANCH=$(git for-each-ref --format='%(refname:short)' $(git symbolic-ref -q HEAD))
TRACKED_BRANCH=$(git for-each-ref --format='%(upstream:short)' $(git symbolic-ref -q HEAD))

if [ -n "$TRACKED_BRANCH" ]; then
    git remote update --prune
    git reset --hard "$TRACKED_BRANCH"
else
    echo "$BRANCH is not tracked any remote branch"
fi
